<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="í•  ì¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì„¸ë ¨ëœ To-Do List ì• í”Œë¦¬ì¼€ì´ì…˜">
    <title>âœ¨ My To-Do List</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Google Identity Services (ì‹ ê·œ ë°©ì‹) -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Kakao JavaScript SDK -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="app-container">
        <!-- ë°°ê²½ ì¥ì‹ ìš”ì†Œ -->
        <div class="bg-decoration">
            <div class="circle circle-1"></div>
            <div class="circle circle-2"></div>
            <div class="circle circle-3"></div>
        </div>

        <!-- ë¡œê·¸ì¸ ì„¹ì…˜ (ë¡œê·¸ì¸ ì „) -->
        <div class="login-card" id="loginCard">
            <div class="login-icon">ğŸ”</div>
            <h1 class="login-title">My To-Do List</h1>
            <p class="login-subtitle">Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì—¬<br>í•  ì¼ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”</p>

            <!-- í™˜ê²½ë³€ìˆ˜ ë¡œë“œ -->
            <script src="/env.js"></script>

            <!-- Google Identity Services ë¡œê·¸ì¸ ë²„íŠ¼ -->
            <div id="google-login-container"></div>
            <script>
                // Google Client ID ë™ì  ì„¤ì • (DOM ì¡°ì‘)
                document.addEventListener('DOMContentLoaded', () => {
                    if (window.ENV && window.ENV.GOOGLE_CLIENT_ID) {
                        const div = document.createElement('div');
                        div.id = 'g_id_onload';
                        div.setAttribute('data-client_id', window.ENV.GOOGLE_CLIENT_ID);
                        div.setAttribute('data-callback', 'handleCredentialResponse');
                        div.setAttribute('data-auto_prompt', 'false');
                        document.getElementById('google-login-container').appendChild(div);

                        document.getElementById('google-login-container').appendChild(div);

                        // Google Script ë™ì  ë¡œë“œ (ì„¤ì • divê°€ ì¤€ë¹„ëœ í›„)
                        const script = document.createElement('script');
                        script.src = 'https://accounts.google.com/gsi/client';
                        script.async = true;
                        script.defer = true;
                        document.head.appendChild(script);

                    } else {
                        console.error('âŒ Google Client IDê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    }
                });
            </script>
            <div class="g_id_signin" data-type="standard" data-size="large" data-theme="filled_black"
                data-text="signin_with" data-shape="rectangular" data-logo_alignment="left">
            </div>

            <!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ -->
            <div class="social-divider">
                <span>or</span>
            </div>
            <button class="kakao-login-btn" onclick="loginWithKakao()">
                <img src="kakao_login_large_narrow.png" alt="ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸">
            </button>

            <p class="login-hint">ì†Œì…œ ê³„ì •ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ë¡œê·¸ì¸</p>
        </div>

        <!-- ë©”ì¸ ì¹´ë“œ (ë¡œê·¸ì¸ í›„) -->
        <div class="todo-card" id="todoCard" style="display: none;">
            <!-- ì‚¬ìš©ì ì •ë³´ í—¤ë” -->
            <div class="user-header" id="userHeader">
                <div class="user-info" onclick="openProfileModal()" style="cursor: pointer;" title="í”„ë¡œí•„ ê´€ë¦¬">
                    <img class="user-avatar" id="userAvatar" src="" alt="í”„ë¡œí•„">
                    <div class="user-details">
                        <span class="user-name" id="userName">ì‚¬ìš©ì</span>
                        <span class="user-email" id="userEmail">email@example.com</span>
                    </div>
                </div>
                <button class="logout-btn" onclick="signOut()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>

            <header class="card-header">
                <h1>ğŸ“ My To-Do List</h1>
                <p class="subtitle">ì˜¤ëŠ˜ì˜ í•  ì¼ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”</p>
                <div class="stats">
                    <span class="stat-item" id="totalCount">ì „ì²´: 0</span>
                    <span class="stat-divider">|</span>
                    <span class="stat-item" id="completedCount">ì™„ë£Œ: 0</span>
                </div>
            </header>

            <!-- ì…ë ¥ ì˜ì—­ -->
            <div class="input-section">
                <div class="input-wrapper">
                    <input type="text" id="todoInput" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”..." maxlength="100" autocomplete="off">
                    <button id="addBtn" class="add-btn" title="ì¶”ê°€">
                        <span class="btn-icon">+</span>
                    </button>
                </div>
            </div>

            <!-- ê¸°ê°„ ì¡°íšŒ ì„¹ì…˜ -->
            <div class="date-filter-section">
                <div class="date-filter-header">
                    <span class="filter-icon">ğŸ“…</span>
                    <span>ê¸°ê°„ë³„ ì¡°íšŒ</span>
                    <button class="toggle-filter-btn" id="toggleFilterBtn">
                        <span class="arrow">â–¼</span>
                    </button>
                </div>
                <div class="date-filter-body" id="dateFilterBody">
                    <div class="date-inputs">
                        <div class="date-input-group">
                            <label for="startDate">ì‹œì‘ì¼</label>
                            <input type="date" id="startDate">
                        </div>
                        <span class="date-separator">~</span>
                        <div class="date-input-group">
                            <label for="endDate">ì¢…ë£Œì¼</label>
                            <input type="date" id="endDate">
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="filter-btn search-btn" id="searchBtn">ğŸ” ì¡°íšŒ</button>
                        <button class="filter-btn reset-btn" id="resetBtn">â†» ì „ì²´ë³´ê¸°</button>
                    </div>
                </div>
            </div>

            <!-- í•  ì¼ ëª©ë¡ -->
            <ul class="todo-list" id="todoList">
                <!-- í•  ì¼ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </ul>

            <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ -->
            <div class="empty-state" id="emptyState">
                <span class="empty-icon">ğŸ¯</span>
                <p>í•  ì¼ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
            </div>
        </div>

        <!-- ì €ì‘ê¶Œ -->
        <footer class="app-footer">
            <p>All rights reserved Â©SSMI | 2026</p>
        </footer>

        <!-- í”„ë¡œí•„ ëª¨ë‹¬ -->
        <div class="modal-overlay" id="profileModal" onclick="closeProfileModal(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <h2>ğŸ‘¤ í”„ë¡œí•„ ê´€ë¦¬</h2>
                    <button class="modal-close" onclick="closeProfileModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="profile-avatar-section">
                        <img class="profile-avatar-large" id="profileAvatar" src="" alt="í”„ë¡œí•„">
                    </div>
                    <div class="profile-form">
                        <div class="form-group">
                            <label for="profileName">ì´ë¦„</label>
                            <input type="text" id="profileName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                        </div>
                        <div class="form-group">
                            <label>ì´ë©”ì¼</label>
                            <p class="profile-email" id="profileEmail">email@example.com</p>
                        </div>
                        <div class="form-group">
                            <label>ê°€ì…ì¼</label>
                            <p class="profile-date" id="profileDate">-</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-save" onclick="saveProfile()">ğŸ’¾ ì €ì¥</button>
                    <button class="btn-delete" onclick="deleteAccount()">ğŸ—‘ï¸ íšŒì› íƒˆí‡´</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>